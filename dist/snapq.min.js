//snapQ 1.0.5 https://github.com/chsneo/underscore.snapQ
(function(){_.mixin({nextItem:function(e,t){var n=_.indexOf(e,t),r=e.length-1;if(n<r){return e[n+1]}else{return _.first(e)}},previousItem:function(e,t){var n=_.indexOf(e,t);if(n>0){return e[n-1]}else{return _.last(e)}},keyIndex:function(e,t,n){var r=_.findWhere(e,{key:n});var i=_.indexOf(e,r);if(i===-1){return null}return i},pluckMultiple:function(){var e=_.rest(arguments,1);return _.map(arguments[0],function(t){var n={};_.each(e,function(e){n[e]=t[e]});return n})},rejectMultiple:function(e,t,n){return _.reject(e,function(e){return t.indexOf(e[n])!=-1})},findMultiple:function(e,t,n){return _.filter(e,function(e){return t.indexOf(e[n])!=-1})},toCommaString:function(e,t,n){t=t||"id";n=n||",";return _.pluck(e,t).join(n)},addToggle:function(e,t,n){e=e||[];var r;if(!n){r=_.indexOf(e,function(e){return e===t});if(r>-1){return _.filter(e,function(e){return e!==t})}}else{r=_.find(e,function(e){return e[n]===t[n]});if(r){return _.filter(e,function(e){return e[n]!==t[n]})}}e.push(t);return e},deleteItem:function(e,t){var n=e.indexOf(t);if(n!=-1){e.splice(n,1)}},getTime:function(e){var t="00",n="00",r="00";var i,s,o,u,a,f;try{i=e.split(" ");a=_.last(i);if(a==="AM"||a==="am"){s=_.previousItem(i,a)}else if(a==="PM"||a==="pm"){s=_.previousItem(i,a);o=true}else{s=a;f=true}u=s.split(":");t=parseInt(u[0]);if(!f&&!o&&t===12)t=0;else if(!f&&!o){}else if(!f&&o&&t===12)t=12;else if(!f)t+=12;n=parseInt(u[1]);r=parseInt(u[2])}catch(l){console.error("! unable to parse "+e)}return{hh:t,mm:n,ss:r}},elapsedTime:function(e,t){var n=new Date(e);var r=new Date(t);var i=r.getTime()-n.getTime();return{milliseconds:i,seconds:i/1e3}},compactObject:function(e,t){var n=_.clone(e);_.each(n,function(e,r){if(!e)delete n[r];else if(t&&r==t){delete n[r]}});return n}})})()